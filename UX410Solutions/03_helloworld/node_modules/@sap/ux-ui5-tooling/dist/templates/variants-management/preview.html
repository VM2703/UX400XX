<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{{appTitle}}</title>
	<script>
		window["sap-ushell-config"] = {
			defaultRenderer: "fiori2",
			applications: {
				"<%- previewAppName %>": {
					additionalInformation: "SAPUI5.Component=<%- component %>",
					applicationType: "URL",
					url: "./",
					navigationMode: "embedded"
				}
			}
		};
	</script>
	<script src="/test-resources/sap/ushell/bootstrap/sandbox.js" id="sap-ushell-bootstrap"></script>
	<script id="sap-ui-bootstrap" src="/resources/sap-ui-core.js" <%- ui5Configuration %>></script><% if (reuseLibs) { %>
	<script id="locate-reuse-libs" src="../utils/locate-reuse-libs.js" data-sap-ui-manifest-uri="../manifest.json">
	</script><% } %><% if (rtaMode) { %>
	<script>
		sap.ui.getCore().attachInit(function() {
			sap.ushell.Container.attachRendererCreatedEvent(function() {
				sap.ushell.Container.getServiceAsync('AppLifeCycle').then((serviceInstance) => {
					serviceInstance.attachAppLoaded((event) => {
						var oView = event.getParameter('componentInstance');
						sap.ui.require(["sap/ui/rta/api/startAdaptation"], async function (startAdaptation) {
							var options = {
								rootControl: oView,
								validateAppVersion: false,
								flexSettings: {
									layer: '<%- layer %>',
									developerMode: <%- flexMode %>
								}
							};
							const rta = await startAdaptation(options);
							<% if (flexMode) { %>
								const { init } = await import('./editor/ui5-adaptation.js');
								init({
									rta,
									view: oView,
									layer: '<%- layer %>',
									componentId: '<%- component %>',
									generator: '<%- generator %>'
								});
					
							<% } %>
						});
					})
				});
			});<% if (!reuseLibs) { %>
			sap.ushell.Container.createRenderer().placeAt("content");<% } %>
		});
	</script><% } %>
</head>
<body class="sapUiBody" id="content"></body>
</html>
